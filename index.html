<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ShopEasy - E-Commerce</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 0;
      background: #f9f9f9;
      color: #333;
    }
    header {
      background: #222;
      color: #fff;
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 10;
    }
    header h1 {
      margin: 0;
      font-size: 1.8rem;
      color: #ff6600;
    }
    header nav button {
      margin-left: 10px;
      background: #ff6600;
      color: #fff;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 5px;
      cursor: pointer;
      font-size: 0.9rem;
    }
    header nav button:hover {
      background: #e65c00;
    }
    .container { padding: 1rem 2rem; }
    
    /* Categories */
    .categories {
      margin: 1rem 0;
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
    }
    .categories button {
      background: #eee;
      border: 1px solid #ccc;
      border-radius: 20px;
      padding: 0.5rem 1rem;
      cursor: pointer;
    }
    .categories button.active, .categories button:hover {
      background: #ff6600;
      color: #fff;
      border: none;
    }

    /* Products */
    .products {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px,1fr));
      gap: 1rem;
    }
    .product {
      background: #fff;
      border-radius: 8px;
      padding: 1rem;
      text-align: center;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      transition: transform 0.2s;
    }
    .product:hover { transform: translateY(-5px); }
    .product img {
      width: 100%;
      height: 160px;
      object-fit: cover;
      border-radius: 8px;
    }
    .product h3 { margin: 0.5rem 0; font-size: 1rem; }
    .product p { font-weight: bold; color: #444; }
    .product button {
      margin-top: 5px;
      width: 100%;
      background: #222;
      color: #fff;
      border: none;
      padding: 0.5rem;
      border-radius: 5px;
      cursor: pointer;
    }
    .product button:hover { background: #444; }

    /* Cart Drawer */
    #cartDrawer {
      position: fixed;
      top: 0;
      right: -400px;
      width: 350px;
      height: 100%;
      background: #fff;
      box-shadow: -2px 0 5px rgba(0,0,0,0.2);
      transition: 0.3s;
      padding: 1rem;
      overflow-y: auto;
      z-index: 20;
    }
    #cartDrawer.open { right: 0; }
    .cart-item {
      display: flex;
      justify-content: space-between;
      margin: 0.5rem 0;
      border-bottom: 1px solid #eee;
      padding-bottom: 0.5rem;
    }
    .cart-item button { padding: 0.2rem 0.5rem; margin-left: 5px; }
    #checkoutBtn {
      margin-top: 1rem;
      width: 100%;
      padding: 0.8rem;
      font-size: 1rem;
      border: none;
      border-radius: 5px;
      background: #ff6600;
      color: #fff;
      cursor: pointer;
    }
    #checkoutBtn:hover { background: #e65c00; }

    /* Auth Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
      z-index: 30;
    }
    .modal-content {
      background: #fff;
      padding: 2rem;
      border-radius: 8px;
      width: 300px;
      position: relative;
      text-align: center;
    }
    .modal-content h2 { margin-top: 0; color: #ff6600; }
    .close {
      position: absolute;
      top: 10px; right: 15px;
      cursor: pointer;
      font-weight: bold;
      font-size: 1.2rem;
    }
    input {
      width: 100%;
      padding: 0.5rem;
      margin: 0.5rem 0;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
  </style>
</head>
<body>
  <header>
    <h1>ShopEasy</h1>
    <nav>
      <span id="userDisplay"></span>
      <button id="authBtn" class="auth">Sign In / Sign Up</button>
      <button onclick="toggleCart()">ðŸ›’ Cart</button>
    </nav>
  </header>

  <div class="container">
    <div class="categories" id="categories"></div>
    <div class="products" id="products"></div>
  </div>

  <!-- Cart Drawer -->
  <div id="cartDrawer">
    <h2>Your Cart</h2>
    <div id="cartItems"></div>
    <h3 id="cartTotal">Total: $0</h3>
    <button id="checkoutBtn">Checkout</button>
  </div>

  <!-- Auth Modal -->
  <div id="authModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeAuth()">&times;</span>
      <h2 id="authTitle">Sign In</h2>
      <input type="text" id="username" placeholder="Username" required />
      <input type="email" id="email" placeholder="Email" required />
      <input type="password" id="password" placeholder="Password" required />
      <button onclick="submitAuth()" id="authSubmitBtn">Sign In</button>
      <p style="font-size:0.9rem;">Don't have an account? 
        <a href="#" onclick="toggleAuthMode(event)">Sign Up</a>
      </p>
    </div>
  </div>

  <script>
    // Product List with categories
    const products = [
      { id:1, title:"Men's T-Shirt", price:25, img:"https://via.placeholder.com/200?text=Men+T-Shirt", category:"Men" },
      { id:2, title:"Men's Jeans", price:40, img:"https://via.placeholder.com/200?text=Men+Jeans", category:"Men" },
      { id:3, title:"Women's Dress", price:55, img:"https://via.placeholder.com/200?text=Women+Dress", category:"Women" },
      { id:4, title:"Women's Handbag", price:70, img:"https://via.placeholder.com/200?text=Handbag", category:"Women" },
      { id:5, title:"Kids' Toy Car", price:15, img:"https://via.placeholder.com/200?text=Toy+Car", category:"Kids" },
      { id:6, title:"Kids' T-Shirt", price:20, img:"https://via.placeholder.com/200?text=Kids+T-Shirt", category:"Kids" },
      { id:7, title:"Mixer Grinder", price:120, img:"https://via.placeholder.com/200?text=Mixer+Grinder", category:"Kitchen" },
      { id:8, title:"Cooking Pan", price:35, img:"https://via.placeholder.com/200?text=Cooking+Pan", category:"Kitchen" },
      { id:9, title:"Smartphone", price:499, img:"https://via.placeholder.com/200?text=Smartphone", category:"Electronics" },
      { id:10, title:"Laptop", price:899, img:"https://via.placeholder.com/200?text=Laptop", category:"Electronics" }
    ];

    const categories = ["All","Men","Women","Kids","Kitchen","Electronics"];
    const categoriesDiv = document.getElementById("categories");
    const productsDiv = document.getElementById("products");
    const cartDrawer = document.getElementById("cartDrawer");
    const cartItemsDiv = document.getElementById("cartItems");
    const cartTotal = document.getElementById("cartTotal");

    let cart = JSON.parse(localStorage.getItem("cart")) || [];

    // Render categories
    function renderCategories(){
      categoriesDiv.innerHTML = categories.map((cat,i)=>
        `<button onclick="filterCategory('${cat}')" class="${i===0?'active':''}">${cat}</button>`
      ).join("");
    }

    // Render products
    function renderProducts(filter="All"){
      let filtered = filter==="All"?products:products.filter(p=>p.category===filter);
      productsDiv.innerHTML = filtered.map(p => `
        <div class="product">
          <img src="${p.img}" alt="${p.title}">
          <h3>${p.title}</h3>
          <p>$${p.price}</p>
          <button onclick="addToCart(${p.id})">Add to Cart</button>
        </div>
      `).join("");
      document.querySelectorAll(".categories button").forEach(btn=>{
        btn.classList.toggle("active", btn.textContent===filter);
      });
    }

    // Cart
    function renderCart(){
      cartItemsDiv.innerHTML = cart.map((item,i)=>`
        <div class="cart-item">
          <span>${item.title} x${item.qty}</span>
          <div>
            <button onclick="updateQty(${i}, -1)">-</button>
            <button onclick="updateQty(${i}, 1)">+</button>
            <button onclick="removeItem(${i})">x</button>
          </div>
        </div>
      `).join("");
      let total = cart.reduce((sum,it)=>sum+it.price*it.qty,0);
      cartTotal.innerText = `Total: $${total}`;
      localStorage.setItem("cart", JSON.stringify(cart));
    }
    function addToCart(id){
      let product = products.find(p=>p.id===id);
      let existing = cart.find(c=>c.id===id);
      if(existing) existing.qty++;
      else cart.push({...product, qty:1});
      renderCart();
    }
    function updateQty(i,change){
      cart[i].qty+=change;
      if(cart[i].qty<=0) cart.splice(i,1);
      renderCart();
    }
    function removeItem(i){ cart.splice(i,1); renderCart(); }
    function toggleCart(){ cartDrawer.classList.toggle("open"); }
    document.getElementById("checkoutBtn").onclick=()=>alert("Proceeding to checkout...");

    // Auth
    const authModal = document.getElementById("authModal");
    const authBtn = document.getElementById("authBtn");
    const authTitle = document.getElementById("authTitle");
    const authSubmitBtn = document.getElementById("authSubmitBtn");
    const userDisplay = document.getElementById("userDisplay");
    let isSignIn = true;
    authBtn.onclick = ()=>{ authModal.style.display="flex"; };
    function closeAuth(){ authModal.style.display="none"; }
    function toggleAuthMode(e){
      e.preventDefault();
      isSignIn = !isSignIn;
      authTitle.innerText = isSignIn?"Sign In":"Sign Up";
      authSubmitBtn.innerText = isSignIn?"Sign In":"Sign Up";
    }
    function submitAuth(){
      const username=document.getElementById("username").value;
      const email=document.getElementById("email").value;
      const password=document.getElementById("password").value;
      if(!username||!email||!password){ alert("Fill all fields"); return; }
      if(isSignIn){
        let storedUser = JSON.parse(localStorage.getItem("user"));
        if(storedUser && storedUser.email===email && storedUser.password===password){
          alert("Welcome back, "+storedUser.username);
          setSession(storedUser);
          closeAuth();
        } else { alert("Invalid credentials"); }
      } else {
        let newUser = {username,email,password};
        localStorage.setItem("user", JSON.stringify(newUser));
        alert("Account created! Please Sign In");
        toggleAuthMode(new Event("click"));
      }
    }
    function setSession(user){
      localStorage.setItem("session", JSON.stringify(user));
      userDisplay.innerText = "Hello, "+user.username;
      authBtn.innerText = "Logout";
      authBtn.onclick = logout;
    }
    function logout(){
      localStorage.removeItem("session");
      userDisplay.innerText = "";
      authBtn.innerText = "Sign In / Sign Up";
      authBtn.onclick = ()=>{ authModal.style.display="flex"; };
    }

    // Init
    function filterCategory(cat){ renderProducts(cat); }
    window.onload = ()=>{
      renderCategories();
      renderProducts();
      renderCart();
      let sessionUser = JSON.parse(localStorage.getItem("session"));
      if(sessionUser) setSession(sessionUser);
    }
  </script>
</body>
</html>
